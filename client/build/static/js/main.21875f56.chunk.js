(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),a=n(6),r=n.n(a),s=(n(11),n(2)),i=n.n(s),d=n(4),l=n(3),m=(n(13),n(0)),u=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Book Review"})})},b=function(e){var t=e.addBook,n=e.addBookState,o=e.setAddBookState,c=e.showAddBook,a=e.setShowAddBook;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{id:"add-book-button",className:"button",onClick:function(){return a(!c)},children:c?"Hide":"Add Book"}),c&&Object(m.jsxs)("form",{onSubmit:t,className:"add-book",children:[Object(m.jsx)("input",{placeholder:"book title",type:"text",id:"title",name:"title",value:n,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("input",{className:"button",type:"submit",value:"Submit"})]})]})},j=function(e){var t=e.comment;return Object(m.jsx)("div",{className:"comment",children:t})},h=function(e){var t=e.commentList,n=e._id,o=e.addComment,c=e.addCommentState,a=e.setAddCommentState,r=t.map((function(e,t){return Object(m.jsx)(j,{comment:e},t)}));return Object(m.jsxs)("div",{className:"comment-box",children:[r,Object(m.jsxs)("form",{className:"add-comment",onSubmit:function(e){return o(e,n)},children:[Object(m.jsx)("input",{value:c,placeholder:"add comment...",onChange:function(e){return a(e.target.value)}}),Object(m.jsx)("input",{className:"button",type:"submit",value:"Post"})]})]})},f=function(e){var t=e._id,n=e.title,o=e.commentcount,c=e.toggleComments,a=e.deleteBook,r=e.commentList,s=e.addComment,i=e.addCommentState,d=e.setAddCommentState;return Object(m.jsxs)("div",{className:"book-item",children:[Object(m.jsx)("div",{className:"book-element",children:n}),Object(m.jsxs)("div",{className:"book-element book-comments",onClick:function(){return c(t)},children:["Comments: ",o]}),Object(m.jsx)("div",{className:"book-delete",onClick:function(){return a(t)},children:"X"}),r._id===t&&Object(m.jsx)(h,{commentList:r.comments,_id:t,addComment:s,addCommentState:i,setAddCommentState:d})]})},p=function(e){var t=e.bookList,n=e.toggleComments,o=e.deleteBook,c=e.commentList,a=e.addComment,r=e.addCommentState,s=e.setAddCommentState,i=t.map((function(e,t){return Object(m.jsx)(f,{_id:e._id,title:e.title,commentcount:e.commentcount,toggleComments:n,deleteBook:o,commentList:c,addComment:a,addCommentState:r,setAddCommentState:s},t)}));return Object(m.jsx)("div",{className:"book-list",children:i})},x=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"New books can be posted to /api/books by passing in a book title"}),Object(m.jsx)("code",{children:'{ method: "POST" body: { title: Great Expectations } }'}),Object(m.jsx)("p",{children:"You will receive a JSON response which will include the newly created book's _id "}),Object(m.jsx)("code",{children:' { "_id":"7a29dbce-c104-47c1-8739-eafef9b840f3","title":"Great Expectations","commentcount":0,"comments":[]} '}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"Comments can be posted to /api/books/:bookid"}),Object(m.jsx)("code",{children:'{ method: "POST" body: { comment: "What a narrative rollercoaster!" } }'}),Object(m.jsx)("p",{children:"The return JSON response will include the book title and the full comment array"}),Object(m.jsx)("code",{children:'{"_id":"7a29dbce-c104-47c1-8739-eafef9b840f3","title":"Great Expectations","comments":["What a narrative rollercoaster!"]}'}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"A full list of books can be gotten from /api/books"}),Object(m.jsx)("code",{children:'{ method: "GET" }'}),Object(m.jsx)("p",{children:"The return JSON will have an array with the full list of books and the number of comments"}),Object(m.jsxs)("code",{children:['[{"_id":"e7131f05-fe7f-4540-801c-88c6d6f72e9e","title":"Test123","commentcount":0},',Object(m.jsx)("br",{}),'{"_id":"7a29dbce-c104-47c1-8739-eafef9b840f3","title":"Great Expectations","commentcount":1}]']}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"An individual book with the array of comments can be gotten from /api/books/:bookid"}),Object(m.jsx)("code",{children:'{ method: "GET" }'}),Object(m.jsx)("p",{children:"The return JSON will include the book with its array of comments"}),Object(m.jsx)("code",{children:'{"_id":"7a29dbce-c104-47c1-8739-eafef9b840f3","title":"Great Expectations","comments":["What a narrative rollercoaster!"]}'}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"An individual book can be deleted from /api/books/:bookid"}),Object(m.jsx)("code",{children:'{ method: "DELETE" body: { title: Great Expectations } }'}),Object(m.jsx)("p",{children:"The return will just be a string notifying of whether the delete was successful or not"}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"The entire book collection can be deleted from /api/books"}),Object(m.jsx)("code",{children:'{ method: "DELETE" }'}),Object(m.jsx)("p",{children:"The return will just be a string notifying of whether the delete was successful or not"})]})},O=function(e){var t=e.showAPI,n=e.setShowAPI;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{children:["API Usage ",Object(m.jsx)("button",{onClick:function(){return n(!t)},className:"button api-button",children:t?"Hide":"Show"})]}),t&&Object(m.jsx)(x,{})]})};var k=function(){Object(o.useEffect)((function(){return L(),function(){}}),[]);var e=Object(o.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),r=Object(l.a)(a,2),s=r[0],j=r[1],h=Object(o.useState)([]),f=Object(l.a)(h,2),x=f[0],k=f[1],v=Object(o.useState)({_id:"",comments:[]}),w=Object(l.a)(v,2),S=w[0],g=w[1],C=Object(o.useState)(!1),y=Object(l.a)(C,2),A=y[0],E=y[1],N=Object(o.useState)(!1),B=Object(l.a)(N,2),T=B[0],_=B[1],L=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/books");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,k(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,o,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("title",t.target.title.value),o=new URLSearchParams(n),e.prev=4,e.next=7,fetch("/api/books",{method:"POST",body:o});case 7:return a=e.sent,e.next=10,a.text();case 10:r=e.sent,console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:c(""),L();case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(i.a.mark((function e(t,n){var o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S._id!==t||n){e.next=2;break}return e.abrupt("return",g({_id:"",comments:[]}));case 2:return e.prev=2,e.next=5,fetch("/api/books/".concat(t));case 5:return o=e.sent,e.next=8,o.json();case 8:c=e.sent,g({_id:c._id,comments:c.comments}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/books/".concat(t),{method:"DELETE"});case 3:L(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(i.a.mark((function e(t,n){var o,c,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(o=new FormData).append("comment",s),c=new URLSearchParams(o),e.prev=4,e.next=7,fetch("/api/books/".concat(n),{method:"POST",body:c});case 7:return a=e.sent,e.next=10,a.text();case 10:r=e.sent,console.log(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:j(""),D(n,!0),L();case 20:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(u,{}),Object(m.jsx)(b,{addBook:P,addBookState:n,setAddBookState:c,showAddBook:A,setShowAddBook:E}),Object(m.jsx)(p,{bookList:x,toggleComments:D,deleteBook:F,commentList:S,addComment:G,addCommentState:s,setAddCommentState:j}),Object(m.jsx)(O,{showAPI:T,setShowAPI:_})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),a(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),v()}},[[15,1,2]]]);
//# sourceMappingURL=main.21875f56.chunk.js.map